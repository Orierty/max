# Max.ru –ë–æ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤

–ë–î–æ—Ç –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Max.ru, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–µ–¥–∏–Ω—è–µ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ —Å –Ω—É–∂–¥–∞—é—â–∏–º–∏—Å—è –≤ –ø–æ–º–æ—â—å –ª—é–¥—å–º–∏. –ù–µ –∫–∞–∫–æ–π-—Ç–æ —Ç–∞–º Telegram, –∞ —Å–≤–æ–π, —Ä–æ–¥–Ω–æ–π Max.ru!

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–≤—Å—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª—è—Ç—å!)

- üôã **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –≤—ã–±–∏—Ä–∞–µ—à—å —Ä–æ–ª—å (–≤–æ–ª–æ–Ω—Ç—ë—Ä –∏–ª–∏ –Ω—É–∂–¥–∞—é—â–∏–π—Å—è) 
- üìû **–ó–∞–ø—Ä–æ—Å –∑–≤–æ–Ω–∫–∞ –æ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞** -–≤—Å–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä—ã –ø–æ–ª—É—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚≠ê **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤** - 
- üí¨ **–û—Ç–∑—ã–≤—ã –æ –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞—Ö** - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—Å–ª–µ –∑–≤–æ–Ω–∫–∞
- üè∑Ô∏è **–¢–µ–≥–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –±–∞–±—É—à–∫–∞, –Ω–µ–∑—Ä—è—á–∏–π, –ø–ª–æ—Ö–∞—è –∫–∞–º–µ—Ä–∞, –ø–ª–æ—Ö–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω –∏ —Ç.–¥.
- üì∑ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –Ω–µ–π—Ä–æ–Ω–∫–∞ Qwen2-VL-2B –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –µ—Å–ª–∏ –Ω–∞—Ö–µ—Ä –Ω–µ –Ω—É–∂–Ω–∞
- üÜò **SOS —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π** - –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—Å–µ–º –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞–º
- üóÑÔ∏è **PostgreSQL** - –ë–î


### 1. –ù–∞–∫–∞—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ë–∞–∑–æ–≤—ã–µ (–±–µ–∑ –Ω–µ–π—Ä–æ–Ω–∫–∏):**
```bash
pip install -r requirements.txt
```

–≠—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –µ—Å–ª–∏ `VISION_MODEL_ENABLED=false` (—Ä–µ–∂–∏–º –∑–∞–≥–ª—É—à–µ–∫)

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –Ω–µ–π—Ä–æ–Ω–∫—É –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫:**
```bash
pip install -r requirements.txt
```

–ü–æ—Ç–æ–º —Å—Ç–∞–≤—å `VISION_MODEL_ENABLED=true` –≤ .env


### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

```sql
CREATE DATABASE max_bot;
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤–∞–∂–Ω–æ –Ω–∞—Ö—É–π!)

–°–∫–æ–ø–∏—Ä—É–π `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:

```env
MAX_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_max_ru           # –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç
VISION_MODEL_ENABLED=false              # true –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—Ä—É–±–∏—Ç—å –Ω–µ–π—Ä–æ–Ω–∫—É (–∂—Ä—ë—Ç –ø–∞–º—è—Ç—å!)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=max_bot
DB_USER=postgres
DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å                  # 12345
```

### 4. –ó–∞–ø—É—Å–∫

```bash
python main.py
```

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–æ–≤—ã–π –Ω–µ –ø–∞—à–µ—Ç):**
```bash
python max_echo_bot.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ!)

```
max/
‚îú‚îÄ‚îÄ bot/                      # –í–µ—Å—å –∫–æ–¥ –±–æ—Ç–∞ —Ç—É—Ç
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - —Ç–æ–∫–µ–Ω—ã, –ë–î –∏ –≤—Å—è —Ö—É–π–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.py      # –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ callbacks.py     # –ñ–º–∞–∫–∞–Ω–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.py          # –ú–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requests.py      # –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–º–æ—â—å –æ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image.py         # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sos.py           # SOS —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ utils/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ max_api.py       # API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Max.ru
‚îÇ       ‚îî‚îÄ‚îÄ vision.py        # Qwen2-VL –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ database.py              # –†–∞–±–æ—Ç–∞ —Å PostgreSQL (connection pool –∏ –≤—Å—ë —Ç–∞–∫–æ–µ)
‚îú‚îÄ‚îÄ schema.sql               # SQL —Å—Ö–µ–º–∞ - —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∏–≥–≥–µ—Ä—ã
‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –ó–ê–ü–£–°–ö–ê–ô –≠–¢–û!
‚îú‚îÄ‚îÄ max_echo_bot.py          # –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª (deprecated)
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                     
‚îú‚îÄ‚îÄ downloads/               # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ models/                  # AI –º–æ–¥–µ–ª–∏ (–∞–≤—Ç–æ–º–∞—Ç–æ–º —Å–∫–∞—á–∞—é—Ç—Å—è –µ—Å–ª–∏ VISION_MODEL_ENABLED=true)
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

–∫–æ–º–∞–Ω–¥—ã –≤ Max.ru:

- `/start` - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
- `/menu` - –ø–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —Ñ—É–Ω–∫—Ü–∏–π
- `/switch` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–æ–ª—å (–≤–æ–ª–æ–Ω—Ç—ë—Ä ‚áÑ –Ω—É–∂–¥–∞—é—â–∏–π—Å—è) - –¥–ª—è —Ç–µ—Å—Ç–æ–≤


**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—ë—Ç—Å—è:**
- `psql -U postgres` –∏ —Ä—É–∫–∞–º–∏ —Å–æ–∑–¥–∞–π: `CREATE DATABASE max_bot;`
- –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL

**–ù–µ–π—Ä–æ–Ω–∫–∞ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è:**
- –í—ã—Ä—É–±–∏ –µ—ë –Ω–∞—Ö—É–π: `VISION_MODEL_ENABLED=false`

**Callback'–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ `bot.log`
